---

copyright:
  years: 2024
lastupdated: "2024-07-22"

keywords: confidential computing, enclave, secure execution, hpcr, hyper protect virtual server for vpc, hyper protect secure build, hpsb, sbs

subcollection: vpc

---

{{site.data.keyword.attribute-definition-list}}

# Hyper Protect Secure Build
{: #about-hpsb}

By using Hyper Protect Secure Build, you can build a trusted container image within a secure enclave that is provided by {{site.data.keyword.cloud_notm}} {{site.data.keyword.hpvs}} for VPC. The enclave is highly isolated, where developers can access the container only by using a specific API and the cloud administrator cannot access the contents of the container. Therefore, the image that is built can be highly trusted. Specifically, the build server cryptographically signs the image, and a manifest (which is a collection of materials that are used during the build, for audits). Since the enclave protects the signing keys within the enclave, the signatures can be used to verify whether the image and manifest are from the build server, and not elsewhere.
{: shortdesc}


## Configuring and using Hyper Protect Secure Build in {{site.data.keyword.hpvs}} for VPC
{: #hpvs_hpsb}

Ensure that you use the latest Secure Build CLI code from [this repository](https://github.com/ibm-hyper-protect/secure-build-cli).

1. Complete the following steps to set up the Hyper Protect Secure Build Server (HPSB) client environment:
    1. Install the Secure Build CLI first. For more information, see [Install the Secure Build CLI](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#install-the-secure-build-cli).
    2. Prepare the `sbs-config.json` configuration file for the HPSB server. For more information, see [Prepare the configuration](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#preparing-the-configuration) to 
2. Complete the following steps to create the `user-data.yaml`file that is used as the contract.

   1. Copy the following `workload` section of the contract that is generated via an automated process into the `user-data.yaml`file. This `workload` section contains the encrypted details of the Hyper Protect Secure Build image.

   Use the following `workload` section of the contract for the IBM Hyper Protect Container Runtime image version `ibm-hyper-protect-container-runtime-1-0-s390x-17`.
   ```yaml
   hyper-protect-basic.HxjWWAjVn1a0u8yseQv/zmfMlKsW0V0BVPFUI6Rlp4uhQUlHAgNbr2nRk8Ne3yU5WyzodgYJhmMJW6+sQQmg2alWg1sYZRkgBs+wi1VBhau+lRTuAIjhluynx5ss7UwjPKXHWsz0fvpW6QmjCYF7sJOAs6e+Yg38OQ6kVwq8lV26eF2QC/Qz83L5g8ySw0bnbFj7o1EHAccTlaJWlLsnquzkUQ7PgSSS3fedCqsWau5PhPzZ88eGOG3qrXip33D4ByBrv2gP4HOiTfOqXR/Hc37M6z94PeHtTvUgxkt98xXDYoYC1BeTiLRB7G7s3SgTTxJt6HVEAo5JwOStGZm7GhG8v2z5Ok+BSETAiY/pWx9NDSXP2n/r4q4qh4V2uybN18++fHodQCE+l+sfa0Kz40DqVGO5Ci4gUsuk+Fp8pvbJY9Mu0M8aldK+EVDVxawcVqhHjTGsz9cbqq/DoQ5hHMBfaW1WMU3tGlVwN2nJjwNUCN/eP9c8NLlKbZX/3wLbdV+7F01TMI1PSL2xTgxG4YzOPfKpabDgJSL1mAPlkQ5zCRVulUq5yFhQtrcKZdihQmwLfX0JgBANygJovBAXPXI4O++rfhjsb6u2bRC3+HOv0DcU3JPu6hQLvEgudgHdeoNOnY2hIHw9Fvbvs+xi5PqKicE9Fe+jJsnsOvvb2RM=.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
   ```
   {: codeblock}


   2. Create the `env` section of the contract. For more information about the `env` section of the contract, see [The env section](https://cloud.ibm.com/docs/vpc?topic=vpc-about-contract_se#hpcr_contract_env) and [an example of the `env` section](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#an-example-of-the-env-section-of-the-contract).

   3. Combine the `workload` and `env` sections in the `user-data.yaml` file. The following snippet shows an example of how you can combine the two sections:

      ```sh
      workload: hyper-protect-basic.HxjWWAjV.......ENo/Svv1q
      env: hyper-protect-basic.i/ULZm+oz.......r09Db0SG9mzQ
      ```
      {: screen}

      [This](/docs/vpc?topic=vpc-about-contract_se#step7) is example of a contract.


3. Deploy the HPSB on {{site.data.keyword.hpvs}} for VPC by using the certificates and the contract that you created in the previous step. For more information, see [Deploying the Hyper Protect Secure Build Server](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#deploying-the-hyper-protect-secure-build-server).

4. Build the container image by using the HPSB. For more information, see [How to build image by using HPSB](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#how-to-build-image-by-using-hpsb).

5. Deploy the image that you built on {{site.data.keyword.hpvs}} for VPC. For more information, see [How to deploy the image that is built by using HPSB](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#how-to-deploy-the-image-that-is-built-by-using-hpsb). 
